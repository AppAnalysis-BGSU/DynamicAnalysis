package com.apsalar.sdk;

import com.adsdk.sdk.Const;
import java.io.UnsupportedEncodingException;
import java.net.URLEncoder;

/* compiled from: ApEvent */
class ApsalarRegister extends ApsalarEvent implements ApsalarAPI {
    protected String registerName = null;
    protected String registerType = null;

    protected ApsalarRegister(String str, String str2, ApsalarSessionInfo apsalarSessionInfo) {
        super(apsalarSessionInfo);
        this.registerType = str;
        this.registerName = str2;
    }

    protected void init() {
        this.urlbase = "http://e.apsalar.com/api/v1/register";
        this.eventType = 5;
    }

    protected void makeURL() {
        String str = "";
        try {
            str = "?a=" + URLEncoder.encode(this.info.apiKey, Const.ENCODING) + "&av=" + URLEncoder.encode(this.info.appVersion, Const.ENCODING) + "&i=" + URLEncoder.encode(this.info.clsPackage, Const.ENCODING) + "&p=" + URLEncoder.encode(this.info.platform, Const.ENCODING) + "&rt=" + URLEncoder.encode(this.info.retType, Const.ENCODING) + "&s=" + URLEncoder.encode(this.info.sessionId, Const.ENCODING) + "&sdk=" + URLEncoder.encode(this.info.sdkVersion, Const.ENCODING) + "&type=" + URLEncoder.encode(this.registerType, Const.ENCODING) + "&u=" + URLEncoder.encode(this.info.deviceId, Const.ENCODING) + "&name=" + URLEncoder.encode(this.registerName, Const.ENCODING);
        } catch (UnsupportedEncodingException e) {
        }
        this.url = str;
    }

    public int REST() {
        int REST = super.REST();
        if (REST == 1) {
            ApsalarItem apsalarItem = null;
            if (this.registerType == "C") {
                apsalarItem = (ApsalarItem) Apsalar.registered_callbacks.get(this.registerName);
            } else if (this.registerType == "T") {
                apsalarItem = (ApsalarItem) Apsalar.registered_triggers.get(this.registerName);
            }
            if (apsalarItem != null) {
                apsalarItem.connected = Boolean.valueOf(true);
                apsalarItem.registered = Boolean.valueOf(true);
            }
        }
        return REST;
    }
}
