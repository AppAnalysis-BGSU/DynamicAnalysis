package com.ixaexvsbscmhkbbddjlq;

import android.content.Intent;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.net.Uri;
import android.os.Handler;
import android.util.FloatMath;
import org.json.JSONException;

final class C0086B implements SensorEventListener {
    private long f183a = 0;
    private long f184b;
    private int f185c = 0;
    private Handler f186d;
    private Runnable f187e;
    private boolean f188f = false;
    private int f189g;
    private int f190h;
    private boolean f191i = true;
    private /* synthetic */ AdController f192j;

    public C0086B(AdController adController, boolean z) {
        this.f192j = adController;
        if (this.f191i) {
            this.f186d = new Handler();
            this.f187e = new C0087C(this, adController);
        }
    }

    private void m167d() {
        this.f183a = 0;
        this.f184b = 0;
        this.f185c = 0;
    }

    private void m168e() {
        this.f188f = false;
        this.f192j.ao = false;
        this.f192j.f43U.unregisterListener(this);
        AdLog.m108i(AdController.LB_LOG, "shake event detection disabled");
    }

    public final void m169a() {
        this.f186d.postDelayed(this.f187e, (long) this.f190h);
    }

    public final void m170a(int i) {
        this.f189g = i;
    }

    public final void m171b() {
        this.f188f = true;
        this.f192j.f43U.registerListener(this, this.f192j.f43U.getDefaultSensor(1), 1);
        AdLog.m108i(AdController.LB_LOG, "shake event detection enabled");
    }

    public final void m172b(int i) {
        this.f190h = i;
    }

    public final void m173c() {
        if (this.f188f) {
            m168e();
            this.f186d.removeCallbacks(this.f187e);
        }
    }

    public final void onAccuracyChanged(Sensor sensor, int i) {
    }

    public final void onSensorChanged(SensorEvent sensorEvent) {
        float f = sensorEvent.values[0];
        float f2 = sensorEvent.values[1];
        float f3 = sensorEvent.values[2];
        this.f192j.f47Y = this.f192j.f46X;
        this.f192j.f46X = FloatMath.sqrt(((f * f) + (f2 * f2)) + (f3 * f3));
        this.f192j.f45W = (this.f192j.f46X - this.f192j.f47Y) + (this.f192j.f45W * 0.9f);
        if (this.f192j.f45W > 2.5f) {
            long currentTimeMillis = System.currentTimeMillis();
            if (this.f183a == 0) {
                this.f183a = currentTimeMillis;
                this.f184b = currentTimeMillis;
            }
            if (currentTimeMillis - this.f184b < 300) {
                this.f184b = currentTimeMillis;
                this.f185c++;
                if (this.f185c >= this.f189g && currentTimeMillis - this.f183a < 1500) {
                    AdLog.m108i(AdController.LB_LOG, "valid shake");
                    m167d();
                    m168e();
                    if (this.f191i) {
                        if (this.f192j.f42T != null && this.f192j.f42T.isPlaying()) {
                            this.f192j.f42T.stop();
                            this.f192j.f42T = null;
                            if (this.f192j.an != null) {
                                this.f192j.an.onAdFinished();
                            }
                            this.f192j.f41S.setStreamVolume(3, this.f192j.f48Z, 8);
                        }
                        this.f186d.removeCallbacks(this.f187e);
                        try {
                            this.f192j.destroyAd();
                            AdLog.m106d(AdController.LB_LOG, "showing audio ad in browser");
                            if (this.f192j.an != null) {
                                this.f192j.an.onAdClicked();
                            }
                            this.f192j.f51c.startActivity(new Intent("android.intent.action.VIEW", Uri.parse(this.f192j.f57i.getString("adurl"))));
                            return;
                        } catch (JSONException e) {
                            return;
                        }
                    }
                    return;
                }
                return;
            }
            return;
        }
        m167d();
    }
}
