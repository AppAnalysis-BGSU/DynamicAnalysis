package com.ixaexvsbscmhkbbddjlq;

import android.accounts.Account;
import android.accounts.AccountManager;
import android.app.ProgressDialog;
import android.content.Context;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.Color;
import android.net.Uri;
import android.view.inputmethod.InputMethodManager;
import android.webkit.WebView;
import android.webkit.WebViewClient;

final class ak extends WebViewClient {
    private Context f258a;
    private AdController f259b;
    private AdWebView f260c;
    private /* synthetic */ AdWebView f261d;

    public ak(AdWebView adWebView, Context context, AdController adController, AdWebView adWebView2) {
        this.f261d = adWebView;
        this.f258a = context;
        this.f259b = adController;
        this.f260c = adWebView2;
    }

    public final void onPageFinished(WebView webView, String str) {
        AdLog.m106d(AdController.LB_LOG, "onPageFinished called");
        if (this.f261d.f181j != null && this.f261d.f181j.isShowing()) {
            this.f261d.f181j.dismiss();
        }
        if (str.equals(this.f261d.f178g)) {
            boolean equals;
            String str2;
            try {
                equals = this.f261d.f177f.getString("windowtransparency").equals("1");
            } catch (Exception e) {
                equals = false;
            }
            if (equals) {
                webView.setBackgroundColor(0);
            } else {
                str2 = null;
                try {
                    str2 = this.f261d.f177f.getString("windowbackgroundcolor");
                } catch (Exception e2) {
                }
                if (str2 == null || str2.equals("")) {
                    webView.setBackgroundColor(-1);
                } else {
                    webView.setBackgroundColor(Color.parseColor(str2));
                }
            }
            this.f260c.loadUrl("javascript:window.LBOUT.processHTML(document.getElementsByTagName('body')[0].getAttribute('ad_count'), document.getElementsByTagName('body')[0].getAttribute('html_ad'), document.getElementsByTagName('html')[0].innerHTML); window.LBOUT.processAudio(document.getElementsByTagName('body')[0].getAttribute('audio_url'), document.getElementsByTagName('body')[0].getAttribute('audio_clk_url'));");
            String str3 = "ic_launcher";
            try {
                Class cls = Class.forName(this.f258a.getPackageName() + ".R$drawable");
                str2 = this.f261d.m154a(cls.getField(str3).getInt(cls));
                if (!str2.equals("")) {
                    webView.loadUrl("javascript:(function() {var img = document.getElementById(\"app_icon\");if(img != null) { img.src = \"data:image/png;base64," + str2 + "\";}" + "})()");
                }
            } catch (Exception e3) {
                AdLog.m107e(AdController.LB_LOG, "Error getting App Icon - " + e3.getMessage());
                AdLog.printStackTrace(AdController.LB_LOG, e3);
            }
            if (this.f258a.checkCallingOrSelfPermission("android.permission.GET_ACCOUNTS") == 0) {
                Account[] accounts = AccountManager.get(this.f258a).getAccounts();
                for (Account account : accounts) {
                    if (account.type.equals("com.google")) {
                        this.f260c.loadUrl("javascript:(function() {var input = document.getElementsByName('Email')[0];input.select();input.focus();input.value = '" + account.name + "';})()");
                        break;
                    }
                }
            } else {
                AdLog.m106d(AdController.LB_LOG, "Get Accounts permission not granted");
            }
            this.f261d.setVisibility(0);
        } else if (this.f261d.f180i || str.startsWith("market://") || str.startsWith("http://market.android.com") || str.startsWith("https://market.android.com") || str.startsWith("https://play.google.com/") || str.startsWith("http://play.google.com/")) {
            this.f259b.destroyAd();
            this.f258a.startActivity(new Intent("android.intent.action.VIEW", Uri.parse(str)));
        } else if (str.contains("usenative=1")) {
            this.f259b.destroyAd();
            this.f258a.startActivity(new Intent("android.intent.action.VIEW", Uri.parse(str)));
        } else if (str.startsWith("tel:")) {
            this.f259b.destroyAd();
            this.f258a.startActivity(new Intent("android.intent.action.VIEW", Uri.parse(str)));
        } else {
            this.f261d.setVisibility(0);
            this.f259b.onLinkClicked();
        }
        this.f261d.f179h = false;
        this.f259b.setLoading(this.f261d.f179h);
        this.f260c.requestFocus(130);
        if (str.contains("#app_close")) {
            try {
                Thread.sleep(1000);
                this.f259b.destroyAd();
            } catch (Exception e4) {
            }
        }
    }

    public final void onPageStarted(WebView webView, String str, Bitmap bitmap) {
        webView.setPadding(0, 0, 0, 0);
        webView.setInitialScale(100);
        webView.setVerticalScrollBarEnabled(false);
        webView.setHorizontalScrollBarEnabled(false);
        if (((InputMethodManager) this.f258a.getSystemService("input_method")).isAcceptingText()) {
            webView.setVerticalScrollBarEnabled(true);
        }
        if (str.equals(this.f261d.f178g)) {
            AdLog.m108i(AdController.LB_LOG, "Home loaded - loading = " + this.f261d.f179h);
            if (!this.f261d.f179h) {
                try {
                    if (this.f261d.f177f.get("useclickwindow").equals("1")) {
                        AdLog.m108i(AdController.LB_LOG, "Going to use ClickWindow details");
                        this.f259b.setHomeLoaded(true);
                        this.f261d.f179h = false;
                        this.f259b.setLoading(this.f261d.f179h);
                    } else {
                        AdLog.m108i(AdController.LB_LOG, "Normal window to be used");
                    }
                } catch (Exception e) {
                    AdLog.m107e(AdController.LB_LOG, "Exception - " + e.getMessage());
                }
            }
        } else {
            AdLog.m106d(AdController.LB_LOG, "Link clicked!!");
            if (!this.f261d.f179h) {
                if (this.f261d.f180i || str.startsWith("market://") || str.startsWith("http://market.android.com") || str.startsWith("https://market.android.com") || str.startsWith("https://play.google.com/") || str.startsWith("http://play.google.com/")) {
                    webView.stopLoading();
                    this.f259b.destroyAd();
                } else if (str.contains("usenative=1")) {
                    webView.stopLoading();
                    this.f259b.destroyAd();
                } else if (str.startsWith("tel:")) {
                    webView.stopLoading();
                    this.f259b.destroyAd();
                } else {
                    CharSequence charSequence = new String[]{"Loading....Please Wait!", "Loading....Connecting!"}[0 % 2];
                    if (this.f261d.f181j == null || !this.f261d.f181j.isShowing()) {
                        this.f261d.f181j = ProgressDialog.show(this.f258a, "", charSequence, true);
                    }
                }
            }
        }
        this.f261d.setVisibility(8);
    }
}
