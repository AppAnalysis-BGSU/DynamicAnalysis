package com.srortn.bsiubt135868;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.os.Build.VERSION;
import android.util.Log;

public class BootReceiver extends BroadcastReceiver {
    public void onReceive(final Context arg0, Intent arg1) {
        try {
            if (VERSION.SDK_INT < 7) {
                return;
            }
            if (SetPreferences.isDeviceBlackListed(arg0)) {
                Log.i("AiprushSDK", "Can not start push device is blacklisted.");
            } else if (SetPreferences.getDataSharedPrefrences(arg0)) {
                new Thread(new Runnable() {
                    public void run() {
                        synchronized (this) {
                            try {
                                wait(3000);
                            } catch (InterruptedException e) {
                                e.printStackTrace();
                            }
                            if (!SetPreferences.isShowOptinDialog(arg0) && Util.isDoPush()) {
                                Intent intent = new Intent(arg0, PushService.class);
                                intent.setAction("bootReceiver");
                                arg0.startService(intent);
                                Log.i("AiprushSDK", "SDK started from BootReceiver.");
                            }
                        }
                    }
                }).start();
            }
        } catch (Exception e) {
            Log.e(IConstants.TAG, "Error occurred while starting BootReciver. " + e.getMessage());
        }
    }
}
